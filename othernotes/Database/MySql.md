# SQL
# 事务(包含锁 MVCC)
- ACID的理解

- 如何保证原子性？
  Redo日志和undo日志。

# 索引
## B+树和B树
B+树相对于B树的区别有两点  
- 第一点是B+树的数据节点都是叶子节点，非叶子节点不存储数据。非叶子节点存储的键更多，导致树层数少，IO次数减少。
- 第二点是B+树的叶子节点按顺序连接。此条和第一条让区间查找更方便。
## 聚簇索引和非聚簇索引
- 聚簇索引Innodb B+树叶子节点存储的是整个记录。
- 非聚簇索引 Myisam B+树的叶子节点存储的是数据的地址。

# 分布式(集群)
- Mysql 读写分离  
  主从架构，主库负责写，从库负责读，主库和从库实时同步。
  从库通过拷贝主库的二进制日志到中继日志中，执行拷贝过来的改变。
- Mysql 主从一致性的保证
  三种同步方式  异步，同步，半同步
  异步，将二进制日志发送后，不管了。
  同步，二进制日志发送后，必须等到所有从库都应用了改变返回结果才认为事务完成。
  半同步，二进制日志发送后，等到至少一个从库发送成功接受日志即可。
- 保证与Redis的一致性？
  场景：C设置key1 value1，C2之后将key1设置为value2，这时候应该怎么改变Redis和数据库？
  先删除redis的值，再改数据库，改完后等待一会再次删除Redis中的键值。双删除策略。
